@model AnimeANdGameMusic.Models.ViewModels.DetailsGame

@{
    ViewBag.Title = "Details";
}

<div class="container">
    <div class="detailCont">

        @{
            string imageurl = "/Content/Images/Games/default.jpg";
            if (Model.SelectedGame.GameHasPic)
            {
                imageurl = "/Content/Images/Games/" + Model.SelectedGame.GameID + "." + Model.SelectedGame.PicExtension;
            }
        }

        <div class="game-poster">
            <div><img alt="@Model.SelectedGame.GameName" src="@imageurl" /></div>
        </div>

        <h2>@Model.SelectedGame.GameName</h2>

        <div class="assoBuyer">
            <h3>Clients associated with <strong>'@Model.SelectedGame.GameName'</strong></h3>
            <div class="clientsContainer">
                <table id="SlctTable">
                    <tr>
                        <th id="thID">Buyer ID</th>
                        <th id="thName">Buyer Info</th>
                    </tr>
                    @foreach (var Buyer in Model.LinkedBuyers)
                    {
                        <tr>
                            <td id="tddID"><a href="/Buyer/Details/@Buyer.BuyerID">@Buyer.BuyerID</a></td>
                            <td id="tddName"><a href="/Buyer/Details/@Buyer.BuyerID">@Buyer.BuyerName - @Buyer.BuyerEmail</a><a href="/Movie/UnAssociate/@Model.SelectedGame.GameID?BuyerID=@Buyer.BuyerID">[x]</a></td>
                        </tr>
                    }
                </table>
            </div>
            <div class="addFav">
                <h4>Add a new buyer who buyed <strong>'@Model.SelectedGame.GameName'</strong></h4>
                <form method="POST" action="/Game/Associate/@Model.SelectedGame.GameID">
                    <select name="BuyerID">
                        @foreach (var Buyer in Model.AvailableBuyers)
                        {
                            <option value="@Buyer.BuyerID">@Buyer.BuyerName - @Buyer.BuyerEmail</option>
                        }
                    </select>
                    <input type="submit" value="Link Buyer" id="linkBtn" />
                </form>
            </div>

            <div class="btnContainer">
                <div class="btn backBtn">
                    <a href="/Game/List">Back</a>
                </div>
                <div class="btn editBtn">
                    <a href="/Game/Edit/@Model.SelectedGame.GameID">Update</a>
                </div>
                <div class="btn delBtn">
                    <a href="/Game/DeleteConfirm/@Model.SelectedGame.GameID">Delete</a>
                </div>
            </div>

        </div>
    </div>

    <div class="details">
        <p>Game ID: @Model.SelectedGame.GameID</p>
        <p>GameName: @Model.SelectedGame.GameName</p>
        <p>Release Year: @Model.SelectedGame.ReleaseYear</p>
        <p>Description: @Model.SelectedGame.Description</p>
        <p>Genre: @Model.SelectedGame.GenreName</p>
        <p>Price: @Model.SelectedGame.Price</p>
    </div>

</div>
